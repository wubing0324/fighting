<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script>
    // async function testAsync() {
    //   return "hello async";
    // }

    // const result = testAsync();
    // console.log(result);

    // function test(){
    //   return new Promise(function(reslove, reject){
    //     var start = new Date()
    //     setTimeout(() => {
    //       var end = new Date()
    //       console.log(end - start)
    //       console.log(123)
    //     }, 5000);
    //   })
    // }

    // async function test1(){
    //   console.log(6655545564645645)
    //   await test()
    //   for(var i = 0; i < 10; i++) {
    //     console.log(i)
    //   }
    // }
    // test1()

    async function async1() {
        console.log( 'async1 start' )
        await async2()
        console.log( 'async1 end' )
    }
    //这里如果这样写，就会阻塞后面的代码，因为是promise，要加reslove才可以。常量就不需要了也不会阻塞
    // async function async2() {
    //   return new Promise(function(){
    //     console.log( 'async2' )
    //   })
    // }
    async function async2() {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          console.log('------------')
          resolve('0000000')
        }, 5000)
        console.log( 'async2' )
      })
    }
    console.log( 'script start' )
    setTimeout( function () {
        console.log( 'setTimeout' )
    }, 0 )

    async1();    
    new Promise( function ( resolve ) {
        console.log( 'promise1' )
        resolve();
    } ).then( function () {
        console.log( 'promise2' )
    } )
    console.log( 'script end' )
  </script>
</body>
</html>
<!-- script start
async1 start
async2
promise1
script end
promise2
setTimeout
'------------'
async1 end -->

